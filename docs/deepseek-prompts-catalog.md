# DeepSeek æç¤ºè¯ç›®å½•

æœ¬æ–‡æ¡£æ•´ç†äº†ç³»ç»Ÿä¸­æ‰€æœ‰ä½¿ç”¨ DeepSeek API çš„åœ°æ–¹åŠå…¶æç¤ºè¯ï¼Œä¾¿äºç»Ÿä¸€ç®¡ç†å’Œä¼˜åŒ–ã€‚

---

## ğŸ“‹ æç¤ºè¯æ¸…å•

ç³»ç»Ÿå…±æœ‰ **3 ä¸ªæ ¸å¿ƒåŠŸèƒ½** ä½¿ç”¨ DeepSeek APIï¼š

| åºå· | åŠŸèƒ½æ¨¡å— | æ–‡ä»¶ä½ç½® | ç”¨é€” | æç¤ºè¯ ID |
|------|---------|---------|------|-----------|
| 1 | RSS æºæ™ºèƒ½åˆ†æ | `lib/sources/intelligent-discovery.ts` | åˆ†æ RSS æºå†…å®¹ç›¸å…³æ€§ | `rss_analysis` |
| 2 | å†…å®¹æ™ºèƒ½è¿‡æ»¤ | `lib/content-filter.ts` | è¿‡æ»¤ä¸ç›¸å…³çš„æ–‡ç«  | `content_filter` |
| 3 | çƒ­ç‚¹è¯é¢˜åˆ†æ | `lib/trending-analyzer-v2.ts` | èšåˆå’Œè¯†åˆ«çƒ­ç‚¹è¯é¢˜ | `trending_analysis` |

---

## 1ï¸âƒ£ RSS æºæ™ºèƒ½åˆ†æ (`rss_analysis`)

**åŠŸèƒ½**: åˆ†æ RSS æºé‡‡æ ·æ ‡é¢˜ï¼Œåˆ¤æ–­å†…å®¹ç±»å‹å’Œç›¸å…³æ€§

**ä½ç½®**: `lib/sources/intelligent-discovery.ts` (ç¬¬ 287-313 è¡Œ)

**è°ƒç”¨å‚æ•°**:
- `model`: `deepseek-chat`
- `temperature`: `0.3`
- `response_format`: `{ type: 'json_object' }`

### System æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªRSSæºåˆ†ç±»ä¸“å®¶ï¼Œç²¾é€šè¯†åˆ«ç§‘æŠ€ã€AIã€äº’è”ç½‘å†…å®¹çš„ç‰¹å¾ã€‚
```

### User æç¤ºè¯æ¨¡æ¿

```
ä½ æ˜¯ä¸€ä¸ªRSSæºåˆ†ç±»ä¸“å®¶ã€‚è¯·åˆ†æä»¥ä¸‹RSSæºé‡‡æ ·çš„{N}ç¯‡æ–‡ç« æ ‡é¢˜:

RSS URL: {feedUrl}
æ–‡ç« æ ‡é¢˜:
1. {title1}
2. {title2}
...

è¯·åˆ¤æ–­è¿™ä¸ªRSSæºçš„ç‰¹å¾,è¿”å› JSON:

{
  "feedType": "specific" | "general",
  "category": "AI" | "ç»¼åˆç§‘æŠ€" | "ç§‘æŠ€äº§å“" | "äº’è”ç½‘/åˆ›ä¸š" | "ç»¼åˆæ–°é—»" | "å…¶ä»–",
  "techRelevance": 0-100,
  "aiRelevance": 0-100,
  "confidence": 0-100,
  "recommendation": "strongly_recommend" | "recommend" | "caution" | "not_recommend",
  "reasoning": "ç®€è¦è¯´æ˜åˆ¤æ–­ç†ç”± (1-2å¥è¯)"
}

è¯´æ˜:
- feedType: specific=90%ä»¥ä¸Šæ–‡ç« å±äºAI/ç§‘æŠ€å‚ç›´é¢†åŸŸ, general=å†…å®¹è¦†ç›–å¤šä¸ªé¢†åŸŸ
- techRelevance: ç§‘æŠ€/äº’è”ç½‘ç›¸å…³å†…å®¹å æ¯”
- aiRelevance: AI/æœºå™¨å­¦ä¹ ç›¸å…³å†…å®¹å æ¯”
- recommendation:
  * strongly_recommend: é«˜è´¨é‡ç§‘æŠ€/AIä¸“é—¨æ¿å— (techRelevance + aiRelevance > 80%)
  * recommend: ç§‘æŠ€åª’ä½“å…¨ç«™ (techRelevance + aiRelevance > 60%)
  * caution: ç»¼åˆåª’ä½“åŒ…å«ç§‘æŠ€å†…å®¹ (techRelevance + aiRelevance åœ¨ 30%-60% ä¹‹é—´)
  * not_recommend: éç§‘æŠ€åª’ä½“ (techRelevance + aiRelevance < 30%)
```

**è¾“å‡ºæ ¼å¼**: JSON

**è°ƒç”¨é¢‘ç‡**: æ¯æ¬¡å‘ç°æ–° RSS æºæ—¶è°ƒç”¨ï¼ˆæœ‰ 500ms å»¶è¿Ÿé™æµï¼‰

---

## 2ï¸âƒ£ å†…å®¹æ™ºèƒ½è¿‡æ»¤ (`content_filter`)

**åŠŸèƒ½**: åˆ¤æ–­æ–‡ç« æ˜¯å¦ä¸ç§‘æŠ€/AI/äº’è”ç½‘ç›¸å…³ï¼Œè¿‡æ»¤ä¸ç›¸å…³å†…å®¹

**ä½ç½®**: `lib/content-filter.ts` (ç¬¬ 84-113 è¡Œ)

**è°ƒç”¨å‚æ•°**:
- `model`: `deepseek-chat`
- `temperature`: `0.3`
- `response_format`: `{ type: 'json_object' }`
- `batch_size`: æ¯æ‰¹æœ€å¤š 50 ç¯‡æ–‡ç« 

### System æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªç§‘æŠ€æ–°é—»è¿‡æ»¤ä¸“å®¶ï¼Œç²¾é€šè¯†åˆ«ç§‘æŠ€ã€AIã€äº’è”ç½‘å’Œå•†ä¸šç›¸å…³å†…å®¹ã€‚
```

### User æç¤ºè¯æ¨¡æ¿

```
ä½ æ˜¯ä¸€ä¸ªç§‘æŠ€æ–°é—»è¿‡æ»¤ä¸“å®¶ã€‚è¯·æ ¹æ®**æ–‡ç« ä¸»é¢˜**åˆ¤æ–­æ˜¯å¦ç›¸å…³ï¼Œè€Œä¸æ˜¯ä»…çœ‹å…³é”®è¯ã€‚

**ä¿ç•™æ ‡å‡†ï¼ˆæ»¡è¶³ä»»ä¸€å³ä¿ç•™ï¼‰ï¼š**
- AI/äººå·¥æ™ºèƒ½ç›¸å…³ï¼ˆåŒ…æ‹¬AIäº§å“ã€AIåº”ç”¨ã€AIå…¬å¸ï¼‰
- ç§‘æŠ€å…¬å¸/äº’è”ç½‘å…¬å¸çš„äº§å“ã€ä¸šåŠ¡ã€æˆ˜ç•¥ã€æŠ•èµ„
- æŠ€æœ¯ã€ç¼–ç¨‹ã€å¼€å‘ç›¸å…³
- ç§‘æŠ€äº§å“æŠ¥é“ï¼ˆå³ä½¿æåˆ°ä»·æ ¼ã€é”€å”®ï¼Œåªè¦ä¸»é¢˜æ˜¯ç§‘æŠ€äº§å“å°±ä¿ç•™ï¼‰
- å•†ä¸šæŠ•èµ„æ–°é—»ï¼ˆç§‘æŠ€/äº’è”ç½‘é¢†åŸŸçš„æŠ•èµ„ã€å¹¶è´­ã€è‚¡ç¥¨ï¼‰
- è‡ªç„¶ç§‘å­¦ç ”ç©¶

**åˆ é™¤æ ‡å‡†ï¼ˆä¸»é¢˜å¿…é¡»æ˜¯ä»¥ä¸‹å†…å®¹æ‰åˆ é™¤ï¼‰ï¼š**
- çº¯ç”µå•†ä¿ƒé”€å¹¿å‘Šï¼ˆåŒ11ã€618ã€é™æ—¶ç§’æ€ç­‰ï¼‰
- æ—…æ¸¸å‡ºè¡Œæ•°æ®ï¼ˆå®¢è¿é‡ã€æ—…å®¢äººæ¬¡ã€å‡æœŸå‡ºæ¸¸ï¼‰
- å½±è§†å¨±ä¹æ¶ˆè´¹ï¼ˆç¥¨æˆ¿ã€æ¼”å”±ä¼šã€ç»¼è‰ºï¼‰
- ä¼ ç»Ÿé›¶å”®ã€é¤é¥®ã€æ—¶å°šï¼ˆéç§‘æŠ€ç±»ï¼‰
- ä½“è‚²ã€æ”¿æ²»ã€ç¤¾ä¼šæ–°é—»

**é‡è¦ï¼šä¸è¦å› ä¸ºå‡ºç°"ä»·æ ¼"ã€"ä¹°"ã€"å–"ç­‰è¯å°±åˆ é™¤ï¼Œè¦çœ‹ä¸»é¢˜ï¼**
- âœ… "AIäº§å“å”®ä»·700ç¾é‡‘" - ä¸»é¢˜æ˜¯AIäº§å“ï¼Œä¿ç•™
- âœ… "å·´è²ç‰¹å‡æŒç§‘æŠ€è‚¡" - ä¸»é¢˜æ˜¯æŠ•èµ„ï¼Œä¿ç•™
- âŒ "é£çŒªå›½åº†å®¢å•ä»·æå‡" - ä¸»é¢˜æ˜¯æ—…æ¸¸æ¶ˆè´¹ï¼Œåˆ é™¤

æ–°é—»åˆ—è¡¨ï¼š
0. [{source}] {title}
1. [{source}] {title}
...

è¯·ä»¥ JSON æ ¼å¼è¿”å›ï¼š
{
  "irrelevant": [éœ€è¦è¿‡æ»¤çš„æ–‡ç« ç´¢å¼•æ•°ç»„],
  "reasoning": "ç®€è¦è¯´æ˜è¿‡æ»¤ç†ç”±"
}
```

**è¾“å‡ºæ ¼å¼**: JSON

**è°ƒç”¨é¢‘ç‡**: æ¯æ¬¡æ–°é‡‡é›†æ–‡ç« åè°ƒç”¨ï¼ˆæ¯æ‰¹å»¶è¿Ÿ 1 ç§’ï¼‰

---

## 3ï¸âƒ£ çƒ­ç‚¹è¯é¢˜åˆ†æ (`trending_analysis`)

**åŠŸèƒ½**: èšåˆç›¸ä¼¼æ–°é—»ï¼Œè¯†åˆ«çƒ­ç‚¹è¯é¢˜

**ä½ç½®**: `lib/trending-analyzer-v2.ts` (ç¬¬ 74-95 è¡Œ)

**è°ƒç”¨å‚æ•°**:
- `model`: `deepseek-chat`
- `temperature`: é»˜è®¤ (æœªæŒ‡å®š)
- `response_format`: æœªæŒ‡å®šï¼ˆè¿”å›æ™®é€šæ–‡æœ¬/JSONï¼‰

### System æç¤ºè¯

```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ–°é—»åˆ†æä¸“å®¶ï¼Œæ“…é•¿è¯†åˆ«çƒ­ç‚¹è¯é¢˜å’Œèšåˆç›¸ä¼¼æ–°é—»ã€‚
```

### User æç¤ºè¯æ¨¡æ¿

```
ä½ æ˜¯ä¸€ä¸ªæ–°é—»åˆ†æä¸“å®¶ï¼Œè¯·åˆ†æä»¥ä¸‹æ–°é—»æ ‡é¢˜ï¼Œæ‰¾å‡ºæœ€è¿‘{hours}å°æ—¶å†…çš„çƒ­ç‚¹è¯é¢˜ã€‚

è§„åˆ™ï¼š
1. åªè¿”å›è¢«å¤šä¸ªæ¥æºï¼ˆâ‰¥2ä¸ªï¼‰æŠ¥é“çš„è¯é¢˜
2. å°†åŒä¸€äº‹ä»¶çš„ä¸åŒæŠ¥é“èšåˆåœ¨ä¸€èµ·
3. è¯†åˆ«è¯­ä¹‰ç›¸ä¼¼çš„æ ‡é¢˜ï¼ˆå¦‚"AMDè‚¡ä»·é£™å‡"å’Œ"AMDçˆ†ç‚¸æ€§åå¼¹"æ˜¯åŒä¸€è¯é¢˜ï¼‰
4. æŒ‰è®¨è®ºçƒ­åº¦æ’åºï¼ˆæ¥æºæ•°é‡ Ã— æŠ¥é“æ•°é‡ï¼‰
5. åªè¿”å›å‰ 15 ä¸ªæœ€çƒ­è¯é¢˜

æ–°é—»åˆ—è¡¨ï¼š
[0] {source} | {title}
[1] {source} | {title}
...

è¯·è¿”å› JSON æ ¼å¼ï¼ˆåªè¿”å› JSONï¼Œä¸è¦ä»»ä½•å…¶ä»–æ–‡å­—ï¼‰ï¼š
{
  "hotTopics": [
    {
      "topic": "è¯é¢˜æ‘˜è¦ï¼ˆ10-20å­—ï¼‰",
      "articleIndexes": [0, 5, 12],
      "sources": ["TechCrunch", "The Verge"]
    }
  ]
}
```

**è¾“å‡ºæ ¼å¼**: JSON (ä½†éœ€è¦ä»æ–‡æœ¬ä¸­æå–)

**è°ƒç”¨é¢‘ç‡**:
- 12 å°æ—¶çƒ­ç‚¹ï¼šæ¯æ¬¡å®šæ—¶ä»»åŠ¡æ‰§è¡Œï¼ˆçº¦æ¯å°æ—¶ï¼‰
- 24 å°æ—¶çƒ­ç‚¹ï¼šæ¯æ¬¡å®šæ—¶ä»»åŠ¡æ‰§è¡Œï¼ˆçº¦æ¯å°æ—¶ï¼‰

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### API è°ƒç”¨æ–¹å¼

æ‰€æœ‰æ¨¡å—ä½¿ç”¨ç›¸åŒçš„ DeepSeek API è°ƒç”¨æ–¹å¼ï¼š

```typescript
const response = await fetch('https://api.deepseek.com/chat/completions', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${process.env.DEEPSEEK_API_KEY}`
  },
  body: JSON.stringify({
    model: 'deepseek-chat',
    messages: [
      { role: 'system', content: systemPrompt },
      { role: 'user', content: userPrompt }
    ],
    temperature: 0.3, // RSSåˆ†æå’Œå†…å®¹è¿‡æ»¤ä½¿ç”¨
    response_format: { type: 'json_object' } // RSSåˆ†æå’Œå†…å®¹è¿‡æ»¤ä½¿ç”¨
  })
})
```

### ç¯å¢ƒå˜é‡

- `DEEPSEEK_API_KEY`: DeepSeek API å¯†é’¥ï¼ˆå¿…éœ€ï¼‰

### é™æµç­–ç•¥

1. **RSS åˆ†æ**: æ¯æ¬¡è°ƒç”¨åå»¶è¿Ÿ 500ms
2. **å†…å®¹è¿‡æ»¤**: æ¯æ‰¹æ¬¡ï¼ˆ50ç¯‡ï¼‰å»¶è¿Ÿ 1 ç§’
3. **çƒ­ç‚¹åˆ†æ**: æ— æ˜ç¡®é™æµï¼ˆæ¯å°æ—¶æ‰§è¡Œ 2 æ¬¡ï¼‰

---

## ğŸ“Š æç¤ºè¯ç»Ÿè®¡

| æ¨¡å— | System é•¿åº¦ | User æ¨¡æ¿é•¿åº¦ | Temperature | JSON æ¨¡å¼ |
|------|------------|--------------|-------------|-----------|
| RSS åˆ†æ | 33 å­— | ~580 å­— | 0.3 | âœ… |
| å†…å®¹è¿‡æ»¤ | 32 å­— | ~520 å­— | 0.3 | âœ… |
| çƒ­ç‚¹åˆ†æ | 26 å­— | ~280 å­— | é»˜è®¤ | âŒ |

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–

1. **ç»Ÿä¸€ Temperature å‚æ•°**: çƒ­ç‚¹åˆ†ææ¨¡å—æœªè®¾ç½® temperatureï¼Œå»ºè®®ç»Ÿä¸€ä¸º 0.3
2. **ç»Ÿä¸€ JSON æ ¼å¼**: çƒ­ç‚¹åˆ†ææ¨¡å—æœªä½¿ç”¨ `response_format`ï¼Œå»ºè®®å¯ç”¨ä»¥æé«˜è§£æç¨³å®šæ€§
3. **æ·»åŠ  Retry æœºåˆ¶**: æ‰€æœ‰æ¨¡å—åœ¨ API å¤±è´¥æ—¶åº”æœ‰é‡è¯•é€»è¾‘

### é•¿æœŸä¼˜åŒ–

1. **æç¤ºè¯å¯é…ç½®åŒ–**: å°†æ‰€æœ‰æç¤ºè¯ç§»è‡³æ•°æ®åº“æˆ–é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒåœ¨çº¿ç¼–è¾‘
2. **A/B æµ‹è¯•**: å¯¹ä¸åŒæç¤ºè¯ç‰ˆæœ¬è¿›è¡Œæ•ˆæœå¯¹æ¯”
3. **Token ä¼˜åŒ–**: ç›‘æ§å„æ¨¡å—çš„ token ä½¿ç”¨é‡ï¼Œä¼˜åŒ–æç¤ºè¯é•¿åº¦
4. **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒåˆ‡æ¢åˆ°å…¶ä»– LLMï¼ˆå¦‚ GPT-4, Claudeï¼‰

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¿®æ”¹å†…å®¹ |
|------|------|---------|
| 1.0 | 2025-10-11 | åˆå§‹ç‰ˆæœ¬ï¼Œæ•´ç†æ‰€æœ‰ç°æœ‰æç¤ºè¯ |

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ™ºèƒ½ RSS å‘ç°åŠŸèƒ½æ–‡æ¡£](./intelligent-rss-discovery.md)
- [æ™ºèƒ½æ·»åŠ å‘å¯¼æ–‡æ¡£](./smart-add-source-wizard.md)
- [æ•°æ®åº“åŒæ­¥æŒ‡å—](./DATABASE_SYNC_GUIDE.md)
